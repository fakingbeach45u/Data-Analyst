<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fikri | Data Analyst Portfolio</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f4f4f4; }
    header { background: #222; color: #fff; padding: 2rem 1rem; text-align: center; }
    main { max-width: 800px; margin: 2rem auto; background: #fff; padding: 2rem; border-radius: 8px; }
    .projects { margin-top: 2rem; }
    .project { border-bottom: 1px solid #eee; padding: 1rem 0; }
    .project:last-child { border-bottom: none; }
    .project-title { cursor: pointer; color: #007acc; }
    .project-details { display: none; margin-top: 0.5rem; }
    .project.active .project-details { display: block; }
    .contact { margin-top: 2rem; text-align: center; }
    a { color: #007acc; text-decoration: none; }
    a:hover { text-decoration: underline; }
    button { background: #007acc; color: #fff; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; }
    button:hover { background: #005fa3; }
    .loading { color: #888; text-align: center; }
  </style>
</head>
<body>
  <header>
    <h1>Fikri</h1>
    <p>Data Analyst Portfolio</p>
  </header>
  <main>
    <section>
      <h2>About Me</h2>
      <p>
        Hi! I'm Fikri, a passionate data analyst skilled in Python, SQL, and data visualization. Welcome to my portfolio!
      </p>
    </section>
    <section class="projects">
      <h2>My Projects</h2>
      <div id="project-list">
        <div class="loading">Loading projects from GitHub...</div>
      </div>
    </section>
    <section class="contact">
      <h2>Contact</h2>
      <p>Email: <a href="mailto:fikricart@gmail.com">fikricart@gmail.com</a></p>
      <button onclick="window.location.href='mailto:fikricart@gmail.com'">Email Me</button>
    </section>
  </main>
  <script>
    // Fetch project folders from your Data-Analyst repo and display them
    async function fetchProjects() {
      const repoOwner = "fakingbeach45u";
      const repoName = "Data-Analyst";
      const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents`;

      const projectList = document.getElementById('project-list');
      projectList.innerHTML = '<div class="loading">Loading projects from GitHub...</div>';

      try {
        const res = await fetch(apiUrl);
        if (!res.ok) throw new Error("GitHub API error");
        const data = await res.json();

        // Filter for folders (assume each folder is a project)
        const projects = data.filter(item => item.type === "dir");

        if (projects.length === 0) {
          projectList.innerHTML = "<div>No projects found in the repository.</div>";
          return;
        }

        projectList.innerHTML = "";
        for (const project of projects) {
          // Try to fetch README.md for project description
          let description = "";
          try {
            const readmeRes = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${project.name}/README.md`);
            if (readmeRes.ok) {
              const readmeData = await readmeRes.json();
              // Decode base64 README content and take first 300 chars
              const content = atob(readmeData.content.replace(/\n/g, ""));
              description = content.split('\n').slice(0, 5).join('<br>');
            }
          } catch {}

          const div = document.createElement('div');
          div.className = 'project';
          div.innerHTML = `
            <div class="project-title"><strong>${project.name}</strong></div>
            <div class="project-details">${description || "No description available."}
              <br><a href="https://github.com/${repoOwner}/${repoName}/tree/main/${project.name}" target="_blank">View on GitHub</a>
            </div>
          `;
          div.querySelector('.project-title').onclick = () => {
            div.classList.toggle('active');
          };
          projectList.appendChild(div);
        }
      } catch (e) {
        projectList.innerHTML = "<div class='loading'>Failed to load projects from GitHub.</div>";
      }
    }

    fetchProjects();
  </script>
</body>
</html>
